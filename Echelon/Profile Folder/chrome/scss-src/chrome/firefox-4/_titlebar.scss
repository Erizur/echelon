:root {
	--inactive-titlebar-opacity: 1 !important; // remove the shit inactive titlebar transparency
	
	// Fix titlebar background in Firefox 133+
	#TabsToolbar {
		background-color: transparent !important;
	}

	#titlebar {
		-moz-window-dragging: drag !important;
	}

	// hide app menu when titlebar enabled
	&:not([tabsintitlebar="true"]) #appmenu-button-container {
		visibility: collapse !important;
	}

	// maximized behavior
	#toolbar-menubar[inactive="true"],
	&:not([sizemode="maximized"]) #TabsToolbar,
	&[sizemode="maximized"] #titlebar-content,
	&[sizemode="maximized"] #toolbar-menubar:not([inactive="true"]) #TabsToolbar {
		.titlebar-buttonbox-container {
			visibility: collapse !important;
		}
	}

	// grid area for maximized layout
	&[sizemode="maximized"] {
		#titlebar {
			display: grid !important;
			grid-template-areas: "firefox-button menu-bar" "firefox-button tabbar" !important;
			grid-auto-columns: min-content auto !important;
		}

		#titlebar-content {
			grid-area: firefox-button !important;
		}

		#toolbar-menubar {
			grid-area: menu-bar !important;
			margin-inline-start: 4px !important;
		}

		#TabsToolbar {
			grid-area: tabbar !important;
		}
	}
}